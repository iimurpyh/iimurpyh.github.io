<!doctype html>
<html lang="en-us">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
    <title>Teeter</title>

    <!-- Load custom style sheet -->
   <!-- <link rel="stylesheet" type="text/css" href="theme/love.css"> -->
  </head>
  <body>
    <center>
      <div>
        <canvas id="canvas" oncontextmenu="event.preventDefault()"></canvas>
        <canvas id="loadingCanvas" oncontextmenu="event.preventDefault()" width="500" height="500"></canvas>
      </div>
    </center>

    <script type='text/javascript'>
      var loadingContext = document.getElementById('loadingCanvas').getContext('2d');
      function drawLoadingText(text) {
        var canvas = loadingContext.canvas;

        loadingContext.fillStyle = "rgb(142, 195, 227)";
        loadingContext.fillRect(0, 0, canvas.scrollWidth, canvas.scrollHeight);

        loadingContext.font = '2em arial';
        loadingContext.textAlign = 'center'
        loadingContext.fillStyle = "rgb( 11, 86, 117 )";
        loadingContext.fillText(text, canvas.scrollWidth / 2, canvas.scrollHeight / 2);

        loadingContext.fillText("Powered By Emscripten.", canvas.scrollWidth / 2, canvas.scrollHeight / 4);
        loadingContext.fillText("Powered By LÃ–VE.", canvas.scrollWidth / 2, canvas.scrollHeight / 4 * 3);
      }

      window.addEventListener("keydown", function(e) {
        // space and arrow keys
        if([32, 37, 38, 39, 40].indexOf(e.keyCode) > -1) {
          e.preventDefault();
        }
      }, false);

      var Module = {
        arguments: ['./'],
        printErr: console.error.bind(console),
        canvas: (function() {
          var canvas = document.getElementById('canvas');

          // As a default initial behavior, pop up an alert when webgl context is lost. To make your
          // application robust, you may want to override this behavior before shipping!
          // See http://www.khronos.org/registry/webgl/specs/latest/1.0/#5.15.2
          canvas.addEventListener("webglcontextlost", function(e) { alert('WebGL context lost. You will need to reload the page.'); e.preventDefault(); }, false);

          return canvas;
        })(),
        setStatus: function(text) {
          if (text) {
            drawLoadingText(text);
          } else if (Module.didSyncFS && Module.remainingDependencies === 0) {
            Module.callMain(Module.arguments);
            document.getElementById('loadingCanvas').style.display = 'none';
            document.getElementById('canvas').style.display = 'block';
          }
        },
        didSyncFS: false,
        totalDependencies: 0,
        remainingDependencies: 0,
        monitorRunDependencies: function(left) {
          this.remainingDependencies = left;
          this.totalDependencies = Math.max(this.totalDependencies, left);
          Module.setStatus(left ? 'Preparing... (' + (this.totalDependencies-left) + '/' + this.totalDependencies + ')' : 'All downloads complete.');
        }
      };
      Module.setStatus('Downloading...');
      window.onerror = function(event) {
        // TODO: do not warn on ok events like simulating an infinite loop or exitStatus
        Module.setStatus('Exception thrown, see JavaScript console');
        Module.setStatus = function(text) {
          if (text) Module.printErr('[post-exception status] ' + text);
        };
      };
    </script>
    <script type="text/javascript" src="game.js"></script>
    <script async type="text/javascript" src="love.js"></script>
	<h1 style="text-align: center;">Teeter</h1>
	<p>Made by Murpyh for the Ludum Dare 46 Jam</p>
	<p><strong>How to Play</strong></p>
	<p>Your goal is to prevent the "ball" (the green smiley) from falling off the screen while collecting as many points as possible. You can't directly control the ball, but you can control a "cup" that can hold it.</p>
	<p>If the ball is not within the cup for 10 seconds, it also counts as a loss.</p>
	<p>Red powerups will cause your cup to face upright, useful if it flips over.</p>
	<p>Blue powerups will reset the 10 second timer.</p>
	<p>Yellow powerups will teleport the ball to the center of the screen and freeze it for a second. Be careful, the 10 second timer still applies while it's frozen.</p>
	<p><strong>Credits</strong></p>
	<p>Made with L&Ouml;VE: <a href="https://love2d.org/">https://love2d.org/</a></p>
	<p>Ported to the web using love.js: <a href="https://github.com/TannerRogalsky/love.js/">https://github.com/TannerRogalsky/love.js/</a></p>
	<p>Font used is "Diary of an 8-bit mage" by Chequered Ink: <a href="https://www.fontspace.com/diary-of-an-8-bit-mage-font-f28455">https://www.fontspace.com/diary-of-an-8-bit-mage-font-f28455</a></p>
	<p>Sound effects made with Bfxr: <a href="https://www.bfxr.net/">https://www.bfxr.net/</a></p>
	<p>Have fun! :)</p>
  </body>
</html>
